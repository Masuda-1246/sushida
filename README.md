# Sushida OCR Bot

このプロジェクトは、**Puppeteer** を使用して [Sushida](https://sushida.net/play.html?soundless) タイピングゲームのウェブサイトを自動操作し、特定の領域のスクリーンショットを取得し、**Tesseract.js** でOCR（光学文字認識）を実行してスクリーンショットからテキストを取得し、そのテキストに基づいて動作を行います。

## DEMO


https://github.com/user-attachments/assets/1e5b173b-56fc-429a-b62c-3d4e4a4cc514



## 機能

- Sushidaゲームサイトでのマウスクリックやキーボード入力を自動化します。
- 定期的にスクリーンショットを撮影します。
- **Tesseract.js** を使用して、スクリーンショットからテキストを抽出します。
- 抽出されたテキストをゲームに自動入力します。
- スクリーンショットを、抽出されたテキストをファイル名に含めた名前で保存します。
- 50回の繰り返し処理を行います。

## 必要条件

- Node.js (バージョン12以上)
- インターネット接続（依存ライブラリのダウンロードおよびウェブサイトの操作に必要）

## インストール

1. このリポジトリをクローンまたはダウンロードしてください。

2. 依存パッケージをインストールします：

   ```bash
   npm install
   ```

   以下のパッケージがインストールされます：
   - **Puppeteer**: ブラウザ自動操作ツール
   - **Tesseract.js**: スクリーンショットからOCRを行うためのツール

## 使い方

自動化を開始するには、以下のコマンドを実行してください：

```bash
npm start
```

このスクリプトは以下の処理を行います：
1. **Puppeteer** を使ってブラウザ（Chromium）を起動します。
2. Sushidaタイピングゲームのサウンドなしモードにアクセスします。
3. マウスクリックやキーボード入力をシミュレートします。
4. 特定の領域のスクリーンショットを取得します。
5. **Tesseract.js** を使用してスクリーンショットからOCRを実行し、テキストを抽出します。
6. 抽出されたテキストをゲーム内で自動入力します。
7. スクリーンショットを抽出したテキストをファイル名として保存します。

## スクリプトの詳細

- **Puppeteerによる自動操作**:
   - ブラウザは非ヘッドレスモードで起動し、動作を観察できます。
   - 特定の座標に対してマウスクリックをシミュレートし、抽出されたテキストをゲームに入力します。

- **OCR処理**:
   - ゲームの特定の領域（タイピングエリア周辺）のスクリーンショットを取得します。
   - **Tesseract.js** を使って、スクリーンショットからテキストを抽出します。
   - テキストはクリーンアップされ、次の操作に基づいて入力されます。

- **ファイル管理**:
   - スクリーンショットは `screenshots` フォルダに保存されます。
   - OCRの後、スクリーンショットのファイル名が抽出したテキストを元にリネームされます。
   - ループ処理が完了した後、`screenshots` フォルダは削除されます。

## 設定

- **ループ回数**: スクリプトは50回の繰り返し処理を行うように設定されています（`count < 50`）。必要に応じてこの数値を変更できます。

- **スクリーンショットの領域**: スクリーンショットの領域は `{ x: 250, y: 350, width: 350, height: 20 }` に設定されています。必要に応じて、この範囲を変更して別の領域をキャプチャできます。

## クリーンアップ

スクリプトの最後で、`screenshots` フォルダは自動的に削除されます。必要に応じて、`fs.rmdirSync(screenshotPath, { recursive: true })` をコメントアウトまたは削除して、フォルダを残すように変更できます。

